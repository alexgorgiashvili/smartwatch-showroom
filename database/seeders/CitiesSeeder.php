<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\DB;

class CitiesSeeder extends Seeder
{
    public function run(): void
    {
        if (DB::table('cities')->count() > 0) {
            $this->command->info('Cities already seeded, skipping.');
            return;
        }

        $cities = [
            // თბილისი
            ['name' => 'თბილისი',           'region' => 'თბილისი'],
            // აჭარა
            ['name' => 'ბათუმი',            'region' => 'აჭარა'],
            ['name' => 'ქობულეთი',          'region' => 'აჭარა'],
            ['name' => 'ხელვაჩაური',        'region' => 'აჭარა'],
            ['name' => 'ხულო',              'region' => 'აჭარა'],
            ['name' => 'ქედა',              'region' => 'აჭარა'],
            ['name' => 'შუახევი',           'region' => 'აჭარა'],
            // იმერეთი
            ['name' => 'ქუთაისი',          'region' => 'იმერეთი'],
            ['name' => 'ზესტაფონი',        'region' => 'იმერეთი'],
            ['name' => 'სამტრედია',        'region' => 'იმერეთი'],
            ['name' => 'წყალტუბო',         'region' => 'იმერეთი'],
            ['name' => 'ბაღდათი',          'region' => 'იმერეთი'],
            ['name' => 'ვანი',             'region' => 'იმერეთი'],
            ['name' => 'ხონი',             'region' => 'იმერეთი'],
            ['name' => 'თერჯოლა',         'region' => 'იმერეთი'],
            ['name' => 'საჩხერე',          'region' => 'იმერეთი'],
            ['name' => 'ტყიბული',          'region' => 'იმერეთი'],
            ['name' => 'ჭიათურა',          'region' => 'იმერეთი'],
            // სამეგრელო
            ['name' => 'ზუგდიდი',          'region' => 'სამეგრელო'],
            ['name' => 'ფოთი',             'region' => 'სამეგრელო'],
            ['name' => 'სენაკი',           'region' => 'სამეგრელო'],
            ['name' => 'წალენჯიხა',        'region' => 'სამეგრელო'],
            ['name' => 'მარტვილი',         'region' => 'სამეგრელო'],
            ['name' => 'ჩხოროწყუ',        'region' => 'სამეგრელო'],
            ['name' => 'ხობი',             'region' => 'სამეგრელო'],
            ['name' => 'აბაშა',            'region' => 'სამეგრელო'],
            // შიდა ქართლი
            ['name' => 'გორი',             'region' => 'შიდა ქართლი'],
            ['name' => 'კასპი',            'region' => 'შიდა ქართლი'],
            ['name' => 'ხაშური',           'region' => 'შიდა ქართლი'],
            ['name' => 'ქარელი',           'region' => 'შიდა ქართლი'],
            ['name' => 'ცხინვალი',         'region' => 'შიდა ქართლი'],
            // ქვემო ქართლი
            ['name' => 'რუსთავი',          'region' => 'ქვემო ქართლი'],
            ['name' => 'მარნეული',         'region' => 'ქვემო ქართლი'],
            ['name' => 'გარდაბანი',        'region' => 'ქვემო ქართლი'],
            ['name' => 'ბოლნისი',          'region' => 'ქვემო ქართლი'],
            ['name' => 'წალკა',            'region' => 'ქვემო ქართლი'],
            ['name' => 'დმანისი',          'region' => 'ქვემო ქართლი'],
            ['name' => 'თეთრიწყარო',      'region' => 'ქვემო ქართლი'],
            // კახეთი
            ['name' => 'ტელავი',           'region' => 'კახეთი'],
            ['name' => 'სიღნაღი',          'region' => 'კახეთი'],
            ['name' => 'გურჯაანი',         'region' => 'კახეთი'],
            ['name' => 'საგარეჯო',         'region' => 'კახეთი'],
            ['name' => 'ყვარელი',          'region' => 'კახეთი'],
            ['name' => 'ლაგოდეხი',         'region' => 'კახეთი'],
            ['name' => 'დედოფლისწყარო',   'region' => 'კახეთი'],
            ['name' => 'ახმეტა',           'region' => 'კახეთი'],
            // მცხეთა-მთიანეთი
            ['name' => 'მცხეთა',           'region' => 'მცხეთა-მთიანეთი'],
            ['name' => 'დუშეთი',           'region' => 'მცხეთა-მთიანეთი'],
            ['name' => 'ყაზბეგი',          'region' => 'მცხეთა-მთიანეთი'],
            ['name' => 'თიანეთი',          'region' => 'მცხეთა-მთიანეთი'],
            // სამცხე-ჯავახეთი
            ['name' => 'ახალციხე',         'region' => 'სამცხე-ჯავახეთი'],
            ['name' => 'ბორჯომი',          'region' => 'სამცხე-ჯავახეთი'],
            ['name' => 'ახალქალაქი',       'region' => 'სამცხე-ჯავახეთი'],
            ['name' => 'ნინოწმინდა',       'region' => 'სამცხე-ჯავახეთი'],
            ['name' => 'ადიგენი',          'region' => 'სამცხე-ჯავახეთი'],
            ['name' => 'ასპინძა',          'region' => 'სამცხე-ჯავახეთი'],
            ['name' => 'ვალე',             'region' => 'სამცხე-ჯავახეთი'],
            // გურია
            ['name' => 'ოზურგეთი',         'region' => 'გურია'],
            ['name' => 'ლანჩხუთი',         'region' => 'გურია'],
            ['name' => 'ჩოხატაური',        'region' => 'გურია'],
            // რაჭა-ლეჩხუმი
            ['name' => 'ამბროლაური',       'region' => 'რაჭა-ლეჩხუმი'],
            ['name' => 'ცაგერი',           'region' => 'რაჭა-ლეჩხუმი'],
            ['name' => 'ონი',              'region' => 'რაჭა-ლეჩხუმი'],
            ['name' => 'ლენტეხი',          'region' => 'რაჭა-ლეჩხუმი'],
            // სვანეთი
            ['name' => 'მესტია',           'region' => 'სვანეთი'],
            ['name' => 'ლალი',             'region' => 'სვანეთი'],
        ];

        $now  = now();
        $rows = array_map(fn ($c) => array_merge($c, [
            'created_at' => $now,
            'updated_at' => $now,
        ]), $cities);

        foreach (array_chunk($rows, 100) as $chunk) {
            DB::table('cities')->insert($chunk);
        }

        $this->command->info('✅ ' . count($cities) . ' cities seeded.');
    }
}
